@buy-color: #52BD95;
@rent-color: #e6a524;

.distribution {
  position: relative;
  min-height: 320px; // Ensure container has height for overlay
  
  &__title {
    font-size: 16px;
    font-weight: 600;
    color: #5777d7;
    margin: 0;
  }

  &__subtitle {
    margin: 2px 0 6px;
    font-size: 11px;
    color: #696f8c;
  }

  .svg {
    position: relative;
    margin-top: 20px;
    min-height: 260px;
    opacity: 0;
    transition: opacity 0.5s ease-in-out;

    svg {
      display: block;
      overflow: visible;
    }
  
    .area {
      stroke-width: 1.5px;
      
      &.buyer {
        fill: fade(@buy-color, 30%);
        stroke: @buy-color;
      }

      &.renter {
        fill: fade(@rent-color, 30%);
        stroke: @rent-color;
      }
    }

    .axis-label {
      font-size: 10px;
      fill: #696f8c;
    }

    .domain, .tick line {
      stroke: #e6e6ec;
    }

    .tick text {
      font-size: 10px;
    }
  
    text {
      font-family: "SF UI Text", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
      text-rendering: optimizeLegibility;
    }
    
    .quantile-line {
      stroke-width: 1px;
      stroke-dasharray: 3, 3;
      opacity: 0.8;
    
      &.buyer {
        stroke: darken(@buy-color, 15%);
      }
      &.renter {
        stroke: darken(@rent-color, 15%);
      }
      &.median {
        stroke-dasharray: none;
        stroke-width: 1.2px;
        opacity: 1;
      }
    }

    .quantile-label {
      font-size: 9px;
      text-anchor: middle;
      font-weight: 500;
    
      &.buyer {
        fill: darken(@buy-color, 25%);
      }
      &.renter {
        fill: darken(@rent-color, 25%);
      }
    }
  }

  &.loaded .svg {
    opacity: 1;
  }

  &__overlay {
    position: absolute;
    inset: 40px 0 0; // below header
    background-color: rgba(255, 255, 255, 0.78);
    pointer-events: none;
    opacity: 0;
    transition: opacity 0.22s ease-in-out;
    z-index: 10;
  }

  &.is-loading &__overlay {
    opacity: 1;
  }

  /* Also show overlay when main chart is in break-even search (propagated via parent class) */
  .chart.is-searching + .results-tabs & .distribution__overlay {
    opacity: 1;
  }


  &__toast {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%) translateY(-8px);
    z-index: 60;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    background: #ffffff;
    padding: 6px 10px;
    border-radius: 6px;
    box-shadow: 0 4px 12px rgba(16,24,56,0.12);
    font-weight: 600;
    color: #101840;
    font-size: 12px;
    min-width: 84px;
    text-align: center;
    opacity: 0;
    transition: opacity 200ms ease, transform 220ms ease;
    border-left: 4px solid #adb5bd;

    &.visible {
      opacity: 1;
      transform: translate(-50%, -50%);
    }

    &.hidden {
      opacity: 0;
      transform: translate(-50%, -50%) translateY(-8px);
    }
  }



  &__placeholder {
    margin-top: 12px;
    font-size: 12px;
    color: #9aa0b5;
    text-align: center;

    .placeholder-text {
      margin: 0;
    }
  }
}
